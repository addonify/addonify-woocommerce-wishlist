!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t;(t=jQuery).fn.addonifyWishlistInit=function(a){var i,s=t("body"),d={init:function(){d.toggleModalBackgrounds(),d.wishlistEvents(),d.undoEvent()},displayModal:function(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object.keys(i).length>0)for(var d in i){var e=i[d];a=a.includes("{".concat(d,"}"))?a.replace("{".concat(d,"}"),e):a.replace("{".concat(d,"}"),"")}var n=t("#adfy-wl-modal-content-wrapper");n.length>0?n.replaceWith(a):s.append(a),s.hasClass("adfy-wl-modal-content-is-open")||s.toggleClass("adfy-wl-modal-content-is-open")},toggleModalBackgrounds:function(){s.on("click","#addonify-wishlist-close-modal-btn, #adfy-wl-modal-content-overlay",(function(){s.toggleClass("adfy-wl-modal-content-is-open"),d.hideLoader()})),s.on("click","#adfy-wl-sidebar-toggle-btn, #adfy-wl-sidebar-close-btn, #adfy-wl-sidebar-overlay",(function(){s.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}))},wishlistEvents:function(){t(document).on("addonify_adding_to_wishlist",(function(t,i){d.displayLoader(),i.thisButton.find("span.adfy-wl-btn-icon").length>0&&i.thisButton.find("span.adfy-wl-btn-icon").html(a.loadingWishlistButtonIcon)})),t(document).on("addonify_removing_from_wishlist",(function(t,i){d.displayLoader(),i.thisButton.find("span.adfy-wl-btn-icon").length>0&&i.thisButton.find("span.adfy-wl-btn-icon").html(a.loadingWishlistButtonIcon)})),t(document).on("addonify_added_to_wishlist",(function(i,s){if(d.renderUndoNotice(!1),s.hasOwnProperty("thisButton")&&"redirect_to_wishlist_page"===a.afterAddToWishlistAction&&s.thisButton.hasClass("adfy-wl-add-to-wishlist"))window.location.href=a.wishlistPageURL;else{if(s.hasOwnProperty("thisButton")&&s.hasOwnProperty("modalContentUpdateData")&&"show_popup_notice"===a.afterAddToWishlistAction&&s.thisButton.hasClass("adfy-wl-add-to-wishlist")&&d.displayModal(a.addedToWishlistModal,s.modalContentUpdateData),s.hasOwnProperty("productID")){var e=t("button[data-product_id="+s.productID+"]");e.length>0&&e.each((function(){var a=t(this),i=s.hasOwnProperty("wishlistID")?s.wishlistID:"",e=s.hasOwnProperty("wishlistName")?s.wishlistName:"";d.updateWishlistButtons(a,"added-to-wishlist",i,e)}))}s.hasOwnProperty("itemsCount")&&(d.updateWishlistSidebarElements(s.itemsCount),d.updateWishlistTableElements(s.itemsCount),d.updateWishlistIconElements(s.itemsCount))}})),t(document).on("addonify_removed_from_wishlist",(function(i,s){if(s.hasOwnProperty("thisButton")&&s.hasOwnProperty("modalContentUpdateData")&&void 0!==s.thisButton&&s.thisButton.hasClass("adfy-wl-add-to-wishlist")&&d.displayModal(a.removedFromWishlistModal,s.modalContentUpdateData),s.hasOwnProperty("productID")){var e=t("[data-product_id="+s.productID+"]");e.length>0&&e.each((function(){var a=t(this),i=s.hasOwnProperty("wishlistID")?s.wishlistID:"",e=s.hasOwnProperty("wishlistName")?s.wishlistName:"";d.updateWishlistButtons(a,"removed-from-wishlist",i,e)})),d.removeWishlistSidebarTableProductRow(s.productID)}s.hasOwnProperty("itemsCount")&&(d.updateWishlistSidebarElements(s.itemsCount),d.updateWishlistTableElements(s.itemsCount),d.updateWishlistIconElements(s.itemsCount)),s.hasOwnProperty("productName")&&d.renderUndoNotice(!0,s.productName)})),t(document).on("addonify_wishlist_emptied",(function(t){t.preventDefault(),d.renderUndoNotice(!1),d.updateWishlistSidebarElements(0),d.updateWishlistTableElements(0),d.updateWishlistIconElements(0)}))},updateWishlistButtons:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("added-to-wishlist"===i||"already-in-wishlist"===i){if(t.hasClass("added-to-wishlist")||t.addClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("adfy-wl-add-to-wishlist"))if(t.find("span.adfy-wl-btn-icon").html(a.addedToWishlistButtonIcon),t.hasClass("addonify-wishlist-save-for-later"))t.find("span.adfy-wl-add-to-wislist-label").text(a.savedForLaterButtonLabel);else if("added-to-wishlist"===i){var e=a.addedToWishlistButtonLabel;e.includes("{wishlist_name}")&&(e=e.replace("{wishlist_name}",d)),t.data("added_to_wishlist_button_label")?t.find("span.adfy-wl-add-to-wislist-label").text(t.data("added_to_wishlist_button_label")):t.find("span.adfy-wl-add-to-wislist-label").text(e)}else{var n=a.alreadyInWishlistButtonLabel;n.includes("{wishlist_name}")&&(n=n.replace("{wishlist_name}",d)),t.data("already_in_wishlist_button_label")?t.find("span.adfy-wl-add-to-wislist-label").text(t.data("already_in_wishlist_button_label")):t.find("span.adfy-wl-add-to-wislist-label").text(n)}""!==s&&t.attr("data-wishlist_id",s),""!==d&&t.attr("data-wishlist_name",d)}if("removed-from-wishlist"===i){t.hasClass("added-to-wishlist")&&t.removeClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("adfy-wl-add-to-wishlist")&&(t.find("span.adfy-wl-btn-icon").html(a.addToWishlistButtonIcon),t.hasClass("addonify-wishlist-save-for-later")?t.find("span.adfy-wl-add-to-wislist-label").text(a.saveForLaterButtonLabel):t.hasClass("adfy-wishlist-shortcode-btn")&&t.data("button_label")?t.find("span.adfy-wl-add-to-wislist-label").text(t.data("button_label")):t.find("span.adfy-wl-add-to-wislist-label").text(a.initialAddToWishlistButtonLabel));var o=t.attr("data-wishlist_id");void 0!==o&&!1!==o&&t.removeAttr("data-wishlist_id");var l=t.attr("data-wishlist_name");void 0!==l&&!1!==l&&t.removeAttr("data-wishlist_name")}},addWishlistSidebarProductRow:function(a){var i=t("#adfy-wl-sidebar-content");i.length>0&&i.prepend(a)},addWishlistTableProductRow:function(a){var i=t("#adfy-wl-table-body");i.length>0&&i.prepend(a)},removeWishlistSidebarTableProductRow:function(a){var i="";t("#adfy-wl-sidebar-container").length>0&&(i=t("#adfy-wishlist-sidebar-product-row-"+a)),t("#addonify-wishlist-table").length>0&&(i=t("#adfy-wishlist-table-product-row-"+a)),i.length>0&&i.remove()},updateWishlistSidebarElements:function(a){if(t("#adfy-wl-sidebar-container").length>0){var i=t("#adfy-wl-sidebar-toggle-btn");i.length>0&&(a>0?i.removeClass("hidden"):i.addClass("hidden"));var s=t("#adfy-wl-no-items");s.length>0&&(a>0?s.removeClass("adfy-wl-show").addClass("adfy-wl-hide"):s.removeClass("adfy-wl-hide").addClass("adfy-wl-show"))}},updateWishlistTableElements:function(a){if(t("#adfy-wl-content-wrapper").length>0){var i=t("#adfy-wl-form"),s=t("#adfy-wl-no-items");a>0?(i.addClass("adfy-wl-show").removeClass("adfy-wl-hide"),s.addClass("adfy-wl-hide").removeClass("adfy-wl-show")):(i.addClass("adfy-wl-hide").removeClass("adfy-wl-show"),s.addClass("adfy-wl-show").removeClass("adfy-wl-hide"))}},updateWishlistIconElements:function(a){t(".adfy_wishlist-icon-shortcode-btn").length>0&&t(".adfy_wishlist-icon-shortcode-btn").find(".adfy_wishlist-icon-items-count").text(a)},undoEvent:function(){t(document).on("addonify_wishlist_undo_notice_set",(function(s){clearTimeout(i),parseInt(a.undoNoticeTimeout)>0&&(i=setTimeout((function(){t("#adfy-wl-notice").html("")}),1e3*parseInt(a.undoNoticeTimeout)))}))},displayLoader:function(){t("#adfy-wl-sidebar-container").length>0&&t("#adfy-wl-sidebar-container").append(a.loader),t("#adfy-wl-content-wrapper").length>0&&t("#adfy-wl-content-wrapper").append(a.loader)},hideLoader:function(){t("#addonify-wishlist_spinner")&&t("#addonify-wishlist_spinner").remove()},displayModalLoader:function(){t(".adfy-wl-modal-content-btns").length>0&&t(".adfy-wl-modal-content-btns").append(a.loader)},renderUndoNotice:function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=t("#adfy-wl-notice");if(d.length>0)if(i){var e=a.productRemovalUndoNotice;e.includes("{product_name}")&&""!==s&&void 0!==s&&(e=e.replace("{product_name}",s)),d.html(e),t(document).trigger("addonify_wishlist_undo_notice_set")}else d.html("")}};return d}}));
