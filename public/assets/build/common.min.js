!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t;(t=jQuery).fn.addonifyWishlistInit=function(i){var s,a=t("body"),d={init:function(){d.toggleModalBackgrounds(),d.wishlistEvents(),d.undoEvent()},displayModal:function(s){var d=i.modalTemplate;for(var n in s)if(s.hasOwnProperty(n)){var e=s[n];d=d.includes("{".concat(n,"}"))?d.replace("{".concat(n,"}"),e):d.replace("{".concat(n,"}"),"")}t("#addonify-wishlist-modal-wrapper").replaceWith(d),a.hasClass("addonify-wishlist-modal-is-open")||a.toggleClass("addonify-wishlist-modal-is-open")},toggleModalBackgrounds:function(){a.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",(function(){a.toggleClass("addonify-wishlist-modal-is-open"),d.hideLoader()})),a.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",(function(){a.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}))},wishlistEvents:function(){t(document).on("addonify_adding_to_wishlist",(function(t,s){d.displayLoader(),s.thisButton.find("span.adfy-wishlist-btn-icon").length>0&&s.thisButton.find("span.adfy-wishlist-btn-icon").html(i.loadingWishlistButtonIcon)})),t(document).on("addonify_removing_from_wishlist",(function(t,s){d.displayLoader(),s.thisButton.find("span.adfy-wishlist-btn-icon").length>0&&s.thisButton.find("span.adfy-wishlist-btn-icon").html(i.loadingWishlistButtonIcon)})),t(document).on("addonify_added_to_wishlist",(function(s,a){if(d.renderUndoNotice(!1),a.hasOwnProperty("thisButton")&&"redirect_to_wishlist_page"===i.afterAddToWishlistAction&&a.thisButton.hasClass("addonify-add-to-wishlist-btn"))window.location.href=i.wishlistPageURL;else{if(a.hasOwnProperty("thisButton")&&a.hasOwnProperty("modalContentUpdateData")&&"show_popup_notice"===i.afterAddToWishlistAction&&a.thisButton.hasClass("addonify-add-to-wishlist-btn")&&d.displayModal(a.modalContentUpdateData),a.hasOwnProperty("productID")){var n=t("button[data-product_id="+a.productID+"]");n.length>0&&n.each((function(){var i=t(this),s=a.hasOwnProperty("wishlistID")?a.wishlistID:"",n=a.hasOwnProperty("wishlistName")?a.wishlistName:"";d.updateWishlistButtons(i,"added-to-wishlist",s,n)}))}a.hasOwnProperty("itemsCount")&&(d.updateWishlistSidebarElements(a.itemsCount),d.updateWishlistTableElements(a.itemsCount),d.updateWishlistIconElements(a.itemsCount))}})),t(document).on("addonify_removed_from_wishlist",(function(i,s){if(s.hasOwnProperty("thisButton")&&s.hasOwnProperty("modalContentUpdateData")&&void 0!==s.thisButton&&s.thisButton.hasClass("addonify-add-to-wishlist-btn")&&d.displayModal(s.modalContentUpdateData),s.hasOwnProperty("productID")){var a=t("[data-product_id="+s.productID+"]");a.length>0&&a.each((function(){var i=t(this),a=s.hasOwnProperty("wishlistID")?s.wishlistID:"",n=s.hasOwnProperty("wishlistName")?s.wishlistName:"";d.updateWishlistButtons(i,"removed-from-wishlist",a,n)})),d.removeWishlistSidebarTableProductRow(s.productID)}s.hasOwnProperty("itemsCount")&&(d.updateWishlistSidebarElements(s.itemsCount),d.updateWishlistTableElements(s.itemsCount),d.updateWishlistIconElements(s.itemsCount)),s.hasOwnProperty("productName")&&d.renderUndoNotice(!0,s.productName)})),t(document).on("addonify_wishlist_emptied",(function(t){t.preventDefault(),d.renderUndoNotice(!1),d.updateWishlistSidebarElements(0),d.updateWishlistTableElements(0),d.updateWishlistIconElements(0)}))},updateWishlistButtons:function(t,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("added-to-wishlist"===s||"already-in-wishlist"===s){if(t.hasClass("added-to-wishlist")||t.addClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn"))if(t.find("span.adfy-wishlist-btn-icon").html(i.addedToWishlistButtonIcon),t.hasClass("addonify-wishlist-save-for-later"))t.find("span.addonify-wishlist-btn-label").text(i.savedForLaterButtonLabel);else if("added-to-wishlist"===s){var n=i.addedToWishlistButtonLabel;n.includes("{wishlist_name}")&&(n=n.replace("{wishlist_name}",d)),t.data("added_to_wishlist_button_label")?t.find("span.addonify-wishlist-btn-label").text(t.data("added_to_wishlist_button_label")):t.find("span.addonify-wishlist-btn-label").text(n)}else{var e=i.alreadyInWishlistButtonLabel;e.includes("{wishlist_name}")&&(e=e.replace("{wishlist_name}",d)),t.data("already_in_wishlist_button_label")?t.find("span.addonify-wishlist-btn-label").text(t.data("already_in_wishlist_button_label")):t.find("span.addonify-wishlist-btn-label").text(e)}""!==a&&t.attr("data-wishlist_id",a),""!==d&&t.attr("data-wishlist_name",d)}if("removed-from-wishlist"===s){t.hasClass("added-to-wishlist")&&t.removeClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn")&&(t.find("span.adfy-wishlist-btn-icon").html(i.addToWishlistButtonIcon),t.hasClass("addonify-wishlist-save-for-later")?t.find("span.addonify-wishlist-btn-label").text(i.saveForLaterButtonLabel):t.hasClass("adfy-wishlist-shortcode-btn")&&t.data("button_label")?t.find("span.addonify-wishlist-btn-label").text(t.data("button_label")):t.find("span.addonify-wishlist-btn-label").text(i.initialAddToWishlistButtonLabel));var o=t.attr("data-wishlist_id");void 0!==o&&!1!==o&&t.removeAttr("data-wishlist_id");var l=t.attr("data-wishlist_name");void 0!==l&&!1!==l&&t.removeAttr("data-wishlist_name")}},addWishlistSidebarProductRow:function(i){var s=t("#addonify-wishlist-sidebar-ul");s.length>0&&s.prepend(i)},addWishlistTableProductRow:function(i){var s=t("#adfy-wishlist-table-body");s.length>0&&s.prepend(i)},removeWishlistSidebarTableProductRow:function(i){var s="";t("#addonify-wishlist-sticky-sidebar-container").length>0&&(s=t("#adfy-wishlist-sidebar-product-row-"+i)),t("#addonify-wishlist-table").length>0&&(s=t("#adfy-wishlist-table-product-row-"+i)),s.length>0&&s.remove()},updateWishlistSidebarElements:function(i){if(t("#addonify-wishlist-sticky-sidebar-container").length>0){var s=t("#addonify-wishlist-show-sidebar-btn");s.length>0&&(i>0?s.removeClass("hidden"):s.addClass("hidden"));var a=t("#adfy-wishlist-empty-sidebar-para");a.length>0&&(i>0?a.removeClass("adfy-wishlist-show").addClass("adfy-wishlist-hide"):a.removeClass("adfy-wishlist-hide").addClass("adfy-wishlist-show"))}},updateWishlistTableElements:function(i){if(t("#addonify-wishlist-page-container").length>0){var s=t("#addonify-wishlist-page-form"),a=t("#addonify-empty-wishlist-para");i>0?(s.addClass("adfy-wishlist-show").removeClass("adfy-wishlist-hide"),a.addClass("adfy-wishlist-hide").removeClass("adfy-wishlist-show")):(s.addClass("adfy-wishlist-hide").removeClass("adfy-wishlist-show"),a.addClass("adfy-wishlist-show").removeClass("adfy-wishlist-hide"))}},updateWishlistIconElements:function(i){t(".adfy_wishlist-icon-shortcode-btn").length>0&&t(".adfy_wishlist-icon-shortcode-btn").find(".adfy_wishlist-icon-items-count").text(i)},undoEvent:function(){t(document).on("addonify_wishlist_undo_notice_set",(function(a){clearTimeout(s),parseInt(i.undoNoticeTimeout)>0&&(s=setTimeout((function(){t("#addonify-wishlist-notice").html("")}),1e3*parseInt(i.undoNoticeTimeout)))}))},displayLoader:function(){t("#addonify-wishlist-sticky-sidebar-container").length>0&&t("#addonify-wishlist-sticky-sidebar-container").append(i.loader),t("#addonify-wishlist-page-container").length>0&&t("#addonify-wishlist-page-container").append(i.loader)},hideLoader:function(){t("#addonify-wishlist_spinner")&&t("#addonify-wishlist_spinner").remove()},displayModalLoader:function(){t(".addonify-wishlist-modal-btns").length>0&&t(".addonify-wishlist-modal-btns").append(i.loader)},renderUndoNotice:function(){var s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=t("#addonify-wishlist-notice");if(d.length>0)if(s){var n=i.productRemovalUndoNotice;n.includes("{product_name}")&&""!==a&&void 0!==a&&(n=n.replace("{product_name}",a)),d.html(n),t(document).trigger("addonify_wishlist_undo_notice_set")}else d.html("")}};return d}}));
