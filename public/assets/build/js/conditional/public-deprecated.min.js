!function(v){"use strict";v(document).ready(function(){let e=v("body"),a=v("#adfy-wl-modal-content-wrapper"),o=v("#adfy-wl-modal-content-response"),n=v("ul.adfy-wl-sidebar-wl-items"),l="addonify-wishlist",r=parseInt(addonifyWishlistJSObject.noOfDaysDataIsValid),c=addonifyWishlistJSObject.isLoggedIn;if(v(".adfy-wl-add-to-wishlist button.added-to-wishlist").attr("disabled",!0),!c){let t=m(),d=addonifyWishlistJSObject.addedToWishlistButtonLabel;t.forEach(function(t,i){v('button.adfy-wl-btn[data-product_id="'+t+'"]').find("span").html(d),v('button.adfy-wl-btn[data-product_id="'+t+'"]').find("i").addClass("heart-style-one").removeClass("heart-o-style-one")})}function h(t){let i=parseInt(t.val()?t.val():t.data("product_id"));t={action:"addonify_remove_from_wishlist",productId:i,nonce:addonifyWishlistJSObject.nonce};let d="";0<v("#adfy-wl-sidebar-container").length&&(d=v("#adfy-wl-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+i+'"]')).addClass("loading"),0<v("#addonify-wishlist-table").length&&(d=v("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+i+'"]')).append('<div id="addonify-wishlist_spinner"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11h5v2H2zm15 0h5v2h-5zm-6 6h2v5h-2zm0-15h2v5h-2zM4.222 5.636l1.414-1.414 3.536 3.536-1.414 1.414zm15.556 12.728-1.414 1.414-3.536-3.536 1.414-1.414zm-12.02-3.536 1.414 1.414-3.536 3.536-1.414-1.414zm7.07-7.071 3.536-3.535 1.414 1.415-3.536 3.535z"></path></svg></div>'),v.post(addonifyWishlistJSObject.ajax_url,t,function(t){t.success&&(v(document).trigger("addonify_removed_from_wishlist",[{productID:i,wishlistCount:t.wishlist_count}]),t.wishlist_count<=0&&v("#adfy-wl-sidebar-toggle-btn").addClass("hidden"),u(i),p(t.wishlist_count),y(t.message))},"json").always(function(){d&&d.remove()})}function f(t){let i;var d=parseInt(t.val()?t.val():t.data("product_id"));0<v("#adfy-wl-sidebar-container").length&&(i=v("#adfy-wl-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+d+'"]')).addClass("loading"),0<v("#addonify-wishlist-table").length&&(i=v("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+d+'"]')).append('<div id="addonify-wishlist_spinner"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11h5v2H2zm15 0h5v2h-5zm-6 6h2v5h-2zm0-15h2v5h-2zM4.222 5.636l1.414-1.414 3.536 3.536-1.414 1.414zm15.556 12.728-1.414 1.414-3.536-3.536 1.414-1.414zm-12.02-3.536 1.414 1.414-3.536 3.536-1.414-1.414zm7.07-7.071 3.536-3.535 1.414 1.415-3.536 3.535z"></path></svg></div>');let s;0<t.closest("li.addonify-wishlist-sidebar-item").length&&(s=t.closest("li.addonify-wishlist-sidebar-item")).addClass("loading");var e=m();-1<e.indexOf(d)&&(e.splice(e.indexOf(d),1),b(e)),v(document).trigger("addonify_removed_from_wishlist",[{productID:d,wishlistCount:e.length}]),e.length<=0&&v("#adfy-wl-sidebar-toggle-btn").addClass("hidden"),u(d),p(e.length),y(addonifyWishlistJSObject.removedFromWishlistText,t.data("product_name")),s&&1===s.length&&s.remove(),i&&i.remove()}function w(t,i,d,s=!0){s?v(".addonify-view-wishlist-btn").css("display","block"):v(".addonify-view-wishlist-btn").css("display","none"),v(".adfy-wl-modal-content-icon .adfy-wishlist-icon").hide(),d&&v(".adfy-wl-modal-content-icon .adfy-wishlist-icon.adfy-status-"+d).show(),o.html("<p class='response-text'>"+t.replace("{product_name}",i)+"</p>"),e.addClass("adfy-wl-modal-content-is-open")}function y(t,i=""){let d=v("#adfy-wl-sidebar-container .adfy-wl-ssc-footer");0<d.length&&(""!==i&&(t=t.replace("{product_name}",i)),d.prepend('<div class="notice adfy-wishlist-sidebar-notice"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" /></svg><span>'+t+"</span></div> "),setTimeout(function(){d.find(".notice").fadeOut("fast",function(){v(this).remove()})},5e3))}function p(t){var i=v("#adfy-wl-sidebar-container"),d=v("#adfy-wl-sidebar-container #addonify-empty-wishlist-para");0<t?0<d.length&&d.remove():(0<i.length&&v("#adfy-wl-sidebar-container ul.adfy-wl-sidebar-wl-items").html('<p id="addonify-empty-wishlist-para">'+addonifyWishlistJSObject.emptyWishlistText+"</p>"),v("#adfy-wl-content-wrapper")&&v("#adfy-wl-content-wrapper").html('<p id="addonify-empty-wishlist-para">'+addonifyWishlistJSObject.emptyWishlistText+"</p>"))}function u(t){t=v('[data-product_id="'+t+'"].adfy-wl-add-to-wishlist');t&&!t.hasClass("addonify-custom-wishlist-btn")&&(t.removeClass("added-to-wishlist"),t.find("span.adfy-wl-add-to-wislist-label").text(addonifyWishlistJSObject.initialAddToWishlistButtonLabel),t.find("i.icon.adfy-wishlist-icon").removeClass("heart-style-one").addClass("heart-o-style-one")),v(".woocommerce-notices-wrapper")&&v(".woocommerce-notices-wrapper").remove()}function m(){var t="product_ids",i=addonifyWishlistJSObject.thisSiteUrl,d=localStorage.getItem(l+"_"+i+"_"+t+"_deadline");if(null!==d){if((new Date).getTime()<parseInt(d))return function(d){{if(null===d||"object"!=typeof d)return!1;{let i=new Array;var t=Object.keys(d);return 0<t.length&&t.forEach(function(t){i[t]=d[t]}),i}}}(function(t){let i;try{i=JSON.parse(t)}catch(t){return!1}return i}(localStorage.getItem(l+"_"+i+"_"+t)));localStorage.removeItem(l+"_"+i+"_"+t),localStorage.removeItem(l+"_"+i+"_"+t+"_deadline")}return[]}function b(t){var i="product_ids",d=("object"==typeof t&&(t=JSON.stringify(t)),addonifyWishlistJSObject.thisSiteUrl),s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3),s=s.getTime(),localStorage.setItem(l+"_"+d+"_"+i,t),localStorage.setItem(l+"_"+d+"_"+i+"_deadline",s)}e.on("click",".addonify-wishlist-login-popup-enabled",function(t){t.preventDefault(),w(addonifyWishlistJSObject.loginMessage,"","error")}),e.on("click",".adfy-wl-ajax-add-to-wishlist",function(t){t.preventDefault();var i,t=v(this);if(t.hasClass("added-to-wishlist"))addonifyWishlistJSObject.removeAlreadyAddedProductFromWishlist?(c?h:f)(t):w(addonifyWishlistJSObject.popupAlreadyInWishlistText,t.data("product_name"));else if(c)i=t,d={action:addonifyWishlistJSObject.addToWishlistAction,id:i.data("product_id"),nonce:addonifyWishlistJSObject.nonce},a.addClass("loading"),v.post(addonifyWishlistJSObject.ajax_url,d,function(t){a.removeClass("loading"),1==t.success?(v(document).trigger("addonify_added_to_wishlist",[{productID:i.data("product_id"),wishlistCount:t.wishlist_count,sidebarData:t.sidebar_data}]),p(t.wishlist_count),i.addClass("added-to-wishlist"),w(t.message,i.data("product_name"),"success"),0<t.wishlist_count&&v("#adfy-wl-sidebar-toggle-btn").removeClass("hidden"),t.sidebar_data&&n.append(t.sidebar_data),i.hasClass("addonify-custom-wishlist-btn")||(i.find("span.adfy-wl-add-to-wislist-label").text(addonifyWishlistJSObject.addedToWishlistText),i.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))):w(t.message,i.data("product_name"),"error")},"json");else{var d=t,t=d.data("product_id"),s=m();if(-1===s.indexOf(t))if(s.push(t),b(s),"redirect_to_wishlist_page"===addonifyWishlistJSObject.afterAddToWishlistAction)window.location.href=addonifyWishlistJSObject.wishlistPageURL;else{let i="";v.post(addonifyWishlistJSObject.ajax_url,{action:addonifyWishlistJSObject.addToWishlistActionSideBar,id:d.data("product_id"),nonce:addonifyWishlistJSObject.nonce},function(t){t&&(v("ul.adfy-wl-sidebar-wl-items").append(t.sidebar_data),i=t.sidebar_data)}),d.addClass("added-to-wishlist"),p(s.length),w(addonifyWishlistJSObject.popupAddedToWishlistText,d.data("product_name"),"success"),0<s.length&&v("#adfy-wl-sidebar-toggle-btn").removeClass("hidden"),d.hasClass("addonify-custom-wishlist-btn")||(d.find("span.adfy-wl-add-to-wislist-label").text(addonifyWishlistJSObject.addedToWishlistText),d.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one")),v(document).trigger("addonify_added_to_wishlist",[{productID:d.data("product_id"),wishlistCount:s.length,sidebarData:i}])}else addonifyWishlistJSObject.removeAlreadyAddedProductFromWishlist&&f(d)}}),e.on("click","#addonify-wishlist-close-modal-btn",function(){e.removeClass("adfy-wl-modal-content-is-open")}),e.on("click","#adfy-wl-sidebar-overlay",function(){e.removeClass("addonify-wishlist-sticky-sidebar-is-visible")}),e.on("click","#adfy-wl-sidebar-toggle-btn, #adfy-wl-sidebar-close-btn",function(){e.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}),e.on("click",".addonify-wishlist-ajax-add-to-cart",function(t){t.preventDefault();let d=v(this);t={action:"addonify_add_to_cart_from_wishlist",productId:d.val(),nonce:addonifyWishlistJSObject.nonce};let s="";d.hasClass("adfy-wl-sidebar-btn")&&(s=v("div#adfy-wl-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+d.val()+'"]')),(s=d.hasClass("addonify-wishlist-table-button")?v("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+d.val()+'"]'):s)&&s.addClass("loading"),v.post(addonifyWishlistJSObject.ajax_url,t,function(t){var i;t.success&&(v(document).trigger("addonify_added_to_cart",[{productID:d.data("product_id")}]),d.hasClass("addonify-wishlist-table-button")&&w("{product_name} added to cart",d.data("product_name"),"success"),"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart)&&s&&(s.remove(),u(d.val()),c?p(t.wishlist_count):(-1<(i=m()).indexOf(parseInt(d.val()))&&(i.splice(i.indexOf(parseInt(d.val())),1),b(i)),p(i.length)),y(t.message))},"json"),s&&s.removeClass("loading")}),e.on("click",".addonify-wishlist-ajax-remove-from-wishlist",function(t){t.preventDefault(),h(v(this))}),v(document).on("added_to_cart",function(t,i,d,s){var e=s.data("product_id");let a="";var o=(a=0<v("#addonify-wishlist-table").length?v("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+e+'"]'):v("div#adfy-wl-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+e+'"]')).siblings().length;"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart&&0<a.length&&(0<a.length&&a.remove(),u(e),p(o),y(addonifyWishlistJSObject.removedFromWishlistText,a.data("product_name")),v(document).trigger("addonify_removed_from_wishlist",[{productID:e,wishlist_count:m().length}])),s.parent().hasClass("addonify-wishlist-table-button")&&w("{product_name} added to cart",a.data("product_name"),!1,!1)}),c?v(document).on("click","#addonify-wishlist__clear-all",function(){var t={action:addonifyWishlistJSObject.emptyWishlistAction,nonce:addonifyWishlistJSObject.nonce};v("#addonify-wishlist-table").append('<div id="addonify-wishlist_spinner"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11h5v2H2zm15 0h5v2h-5zm-6 6h2v5h-2zm0-15h2v5h-2zM4.222 5.636l1.414-1.414 3.536 3.536-1.414 1.414zm15.556 12.728-1.414 1.414-3.536-3.536 1.414-1.414zm-12.02-3.536 1.414 1.414-3.536 3.536-1.414-1.414zm7.07-7.071 3.536-3.535 1.414 1.415-3.536 3.535z"></path></svg></div>'),v.post(addonifyWishlistJSObject.ajax_url,t,function(t){t.success?(p(0),w(t.message,"","success",!1),v(document).trigger("addonify_wishlist_emptied")):w(t.message,"","failure",!1)}).always(function(){v("#addonify-wishlist-table #addonify-wishlist_spinner").remove()})}):(0<e.find("div#adfy-wl-content-wrapper").length&&(addonifyWishlistJSObject.requireLogin?v("div#adfy-wl-content-wrapper").html("<h3>"+addonifyWishlistJSObject.loginRequiredMessage+"</h3>"):(v("div#adfy-wl-content-wrapper").html('<div id="addonify-wishlist_spinner"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11h5v2H2zm15 0h5v2h-5zm-6 6h2v5h-2zm0-15h2v5h-2zM4.222 5.636l1.414-1.414 3.536 3.536-1.414 1.414zm15.556 12.728-1.414 1.414-3.536-3.536 1.414-1.414zm-12.02-3.536 1.414 1.414-3.536 3.536-1.414-1.414zm7.07-7.071 3.536-3.535 1.414 1.415-3.536 3.535z"></path></svg></div>'),v.post(addonifyWishlistJSObject.ajax_url,{action:"addonify_get_wishlist_table",productIds:JSON.stringify(m()),nonce:addonifyWishlistJSObject.nonce},function(t){e.find("div#adfy-wl-content-wrapper").replaceWith(t)}),v(document).on("click",".addonify-wishlist-table-remove-from-wishlist",function(t){t.preventDefault();let i;var t=m(),d=parseInt(v(this).val());0<v(this).closest("tr.addonify-wishlist-table-product-row").length&&(i=v(this).closest("tr.addonify-wishlist-table-product-row")),-1<t.indexOf(d)&&(t.splice(t.indexOf(d),1),b(t)),1===i.length&&i.remove(),p(t.length)}))),v(document).on("click",".addonify-wishlist-remove-from-wishlist",function(t){t.preventDefault(),f(v(this))}),0!==v("#addonify-wishlist-table").length||addonifyWishlistJSObject.requireLogin||v.post(addonifyWishlistJSObject.ajax_url,{action:"addonify_get_wishlist_sidebar",productIds:JSON.stringify(m()),nonce:addonifyWishlistJSObject.nonce},function(t){e.find("#adfy-wl-sidebar-container").replaceWith(t),0<m().length&&v("#adfy-wl-sidebar-toggle-btn").removeClass("hidden")}),"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart&&v(document).on("click",".product_type_simple.add_to_cart_button",function(t){var i=v(this).data("product_id"),d=m();-1<d.indexOf(parseInt(i))&&(d.splice(d.indexOf(parseInt(i)),1),b(d))}),v(document).on("click","#addonify-wishlist__clear-all",function(){b({}),p(m().length),w(addonifyWishlistJSObject.emptiedWishlistText,"","success",!1),v(document).trigger("addonify_wishlist_emptied")}))})}(jQuery);