!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t;(t=jQuery)(document).ready((function(){var i=t("body"),d=t("#adfy-wl-sidebar-container"),o=t("#addonify-wishlist-table"),e=0,n="",s="",a="",l=i.addonifyWishlistInit(addonifyWishlistJSObject);function c(){t(document).trigger("addonify_adding_to_wishlist",[{thisButton:s}]);var i={action:addonifyWishlistJSObject.addToWishlistAction,product_id:e,nonce:addonifyWishlistJSObject.nonce};d.length>0&&(i.has_wishlist_sidebar=!0),o.length>0&&(i.has_wishlist_table=!0),t.post(addonifyWishlistJSObject.ajaxURL,i).done((function(i){1==i.success?(t(document).trigger("addonify_added_to_wishlist",[{productID:e,itemsCount:i.itemsCount,thisButton:s,modalContentUpdateData:{product_name:s.data("product_name")}}]),i.hasOwnProperty("sidebarProductRowContent")&&l.addWishlistSidebarProductRow(i.sidebarProductRowContent),i.hasOwnProperty("tableProductRowContent")&&l.addWishlistTableProductRow(i.tableProductRowContent)):l.displayModal(addonifyWishlistJSObject.errorModal,{error_message:i.message})})).always((function(){l.hideLoader()}))}function r(){t(document).trigger("addonify_removing_from_wishlist",[{thisButton:a}]),t.post(addonifyWishlistJSObject.ajaxURL,{action:addonifyWishlistJSObject.removeFromWishlistAction,product_id:e,nonce:addonifyWishlistJSObject.nonce}).done((function(i){i.success?t(document).trigger("addonify_removed_from_wishlist",[{productID:e,productName:n,itemsCount:i.itemsCount,thisButton:a,modalContentUpdateData:{product_name:n}}]):l.displayModal(addonifyWishlistJSObject.errorModal,{error_message:i.message})})).always((function(){l.hideLoader()}))}function u(t){e=t.data("product_id"),n=t.data("product_name")}l.init(),{init:function(){this.wishlistButtonEventHandler(),this.undoEventsHandler(),this.addedToCartEventHandler()},wishlistButtonEventHandler:function(){"1"!==addonifyWishlistJSObject.enabledMultiWishlist&&(i.on("click",".adfy-wl-ajax-add-to-wishlist, .adfy-wl-add-to-wishlist",(function(t){t.preventDefault(),(s=jQuery(this)).addClass("loading"),u(s),s.hasClass("added-to-wishlist")?"1"===addonifyWishlistJSObject.removeAlreadyAddedProductFromWishlist?(a=s,r()):l.displayModal(addonifyWishlistJSObject.alreadyInWishlistModal):c(),s.removeClass("loading")})),i.on("click",".addonify-wishlist-ajax-remove-from-wishlist",(function(i){i.preventDefault(),u(a=t(this)),r()})),t(document).on("click","#addonify-wishlist__clear-all",(function(t){t.preventDefault(),l.displayModal(addonifyWishlistJSObject.confirmClearWishlistModal)})),t(document).on("click","#adfy-wl-modal-confirm-clear-wl-btn",(function(i){i.preventDefault(),l.displayLoader(),t.post(addonifyWishlistJSObject.ajaxURL,{action:addonifyWishlistJSObject.emptyWishlistAction,nonce:addonifyWishlistJSObject.nonce}).done((function(i){i.success?(t(document).trigger("addonify_wishlist_emptied"),l.displayModal(addonifyWishlistJSObject.successModal,{success_message:i.message})):l.displayModal(addonifyWishlistJSObject.errorModal,{error_message:i.message})})).always((function(){l.hideLoader()}))})))},undoEventsHandler:function(){"1"!==addonifyWishlistJSObject.enabledMultiWishlist&&i.on("click","#addonify-wishlist-undo-deleted-product-link",(function(i){i.preventDefault(),s=t(this),c()}))},addedToCartEventHandler:function(){"1"!==addonifyWishlistJSObject.enabledMultiWishlist&&t(document).on("added_to_cart",(function(i,d,o,e){"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart&&(u(e),t(document).trigger("addonify_removed_from_wishlist",[{productID:e.data("product_id"),productName:e.data("product_name"),itemsCount:d.itemsCount,thisButton:e,modalContentUpdateData:{product_name:e.data("product_name")}}]))}))}}.init()}))}));
